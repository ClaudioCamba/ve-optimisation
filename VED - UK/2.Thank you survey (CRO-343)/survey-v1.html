
<style>
/* CSS ========================================================================== */
/* All */
.dy-modal-container .dy-modal-backdrop {
    opacity: 0.8!important;
}
.dy-modal-container .dy-modal-wrapper .dy-modal-contents .dy-lb-close {
    top: 10px!important;
    right: 10px!important;
    cursor: pointer!important;
    height: 22px!important;
    width: 22px!important;
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) #1f2025;
    background-size: 22px!important;
    border: none!important;
    border-radius: 0!important;
}

/* Top */
.tysurvey-top {
    width: 100%;
    height: 75px;
    padding: 10px;
    background-color: #e10a0a;
    display: flex;
    justify-content: center;
    align-items: center;
    border-bottom: 2px solid #B80000;
}
.tysurvey-top .pzn-ved-logo {
    width: auto;
    height: 100%;
    display: block;
    margin: 0 auto;
}

.ved343-content {
    width: 100%;
    padding: 32px;
    height: 300px;
}
/* Body */
.ved343-content>.step1,
.ved343-content>.step2{
    display:none;
}
.ved343-content.step1>.step1,
.ved343-content.step2>.step2 {
    display: block;
}
/* Step 1 */
.ved343-content .pzn-title {
    font-family: ProximaNova, 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size: 32px;
    font-weight: bold;
    color: #292d2f;
    margin: 0;
    margin-bottom: 40px;
}
/* 1-10 buttons */
.rating-wrap .rate-btn {
    height: 40px;
    width: 40px;
    border: 1px solid grey;
}
/* 1-5 Stars */
.rating-wrap .star-wrap {
    display: inline-block;
}
.star-wrap span {
    font-size: 40px;
    cursor: pointer;
}
.star-wrap .icon-star {
    display: none;
}
.star-wrap:hover .icon-star {
    display: block;
}
.star-wrap:hover .icon-star-o {
    display: none;
}

/* Step 2 */
.input-wrap textarea {
    width:100%;
    display: block;
    margin-bottom: 20px;
    padding: 14px 16px;
    font-size: 14px;
    color: #000000;
    background-color: rgb(236, 239, 242);
    outline: none;
    border-radius: 4px;
    border-right: none;
    border-color: rgb(229, 233, 242);
    border-top-style: solid;
    border-bottom-style: solid;
    border-left-style: solid;
    border-width: 1px;
    box-shadow: rgb(0 0 0 / 8%) 0px 1px 1px inset;
    transition: border 0.2s linear 0s, box-shadow 0.2s linear 0s;
    resize: none;
}
.ved343-content .step2 .pzn-title {
    margin-bottom: 20px;
}

.step2 .submit-btn {
    color: #fff;
    background-color: #e10a0a;
    padding: 14px 40px;
    width: auto;
    border-left: none;
    border-radius: 4px;
    border-width: 0px;
    font-size: 14px;
    font-weight: 700;
    display: inline-block;
    text-transform: uppercase;
    text-align: center;
}



</style>

<!-- HTML ========================================================================== -->
<div class="ved343-main" id="dytmpl-${dyVariationId}">
    <div class="tysurvey-top">
        <img src="https://ved.virgin.authxlab.com/_common/img/logos/ved--reversed.png?v=202109231430" alt="Virgin Experience Days" class="pzn-ved-logo">
    </div>
    <div class="ved343-content step1 content_${dyVariationId}">
        <div class="step1">
            <div class="pzn-title title_${dyVariationId}">${Title}</div>
            <!-- <div class="secondary_text_${dyVariationId}">${Secondary Text}</div> -->
            <div class="rating-wrap rate-buttons">
                <span>BAD</span>
                <input class="rate-btn" type="button" value="1">
                <input class="rate-btn" type="button" value="2">
                <input class="rate-btn" type="button" value="3">
                <input class="rate-btn" type="button" value="4">
                <input class="rate-btn" type="button" value="5">
                <input class="rate-btn" type="button" value="6">
                <input class="rate-btn" type="button" value="7">
                <input class="rate-btn" type="button" value="8">
                <input class="rate-btn" type="button" value="9">
                <input class="rate-btn" type="button" value="10">
                <span>GREAT</span>
            </div>
            <div class="rating-wrap rate-stars">
                <div class="star-wrap">
                    <span class="icon icon-star"></span>
                    <span class="icon icon-star-o"></span>
                </div>
                <div class="star-wrap">
                    <span class="icon icon-star"></span>
                    <span class="icon icon-star-o"></span>
                </div>
                <div class="star-wrap">
                    <span class="icon icon-star"></span>
                    <span class="icon icon-star-o"></span>
                </div>
                <div class="star-wrap">
                    <span class="icon icon-star"></span>
                    <span class="icon icon-star-o"></span>
                </div>
                <div class="star-wrap">
                    <span class="icon icon-star"></span>
                    <span class="icon icon-star-o"></span>
                </div>
            </div>
        </div>
        <div class="step2">
            <div class="pzn-title">How can we improve?</div>
            <div class="input-wrap">
                <textarea class="feedback-input" name="w3review" rows="4" cols="50">Testing</textarea>
                <a class="submit-btn button_${dyVariationId}" href="${Button URL}">${Button Text}</a> 
          </div>
        </div>
    </div>
  </div>

  <script>
    // SCRIPT ==========================================================================
let contentWrap = document.querySelector('.ved343-content');
    btnRating = document.querySelectorAll('.rating-wrap .rate-btn');
    visSelection = {
        rating : [],
        feedback : []
    }

btnRating.forEach(function(elem) {
    elem.addEventListener('click', function() {
        //this function does stuff
        selectedRating(parseInt(elem.getAttribute('value')));
    });
});

function selectedRating(data){
    console.log(data);
    if (data >= 7){
        console.log('FIRE MENTION ME');
    } else {
        contentWrap.classList.remove('step1');
        contentWrap.classList.add('step2');
    };
}



  </script>